<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

	<changeSet id="scripts-base-0004" author="vishwanath">
		
		<addForeignKeyConstraint baseColumnNames="website_id"
			baseTableName="website_warehouses" constraintName="website_warehouses_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="websites" />
		<addForeignKeyConstraint baseColumnNames="warehouse_id"
			baseTableName="website_warehouses" constraintName="website_warehouses_fk_2"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="warehouse" />
			
		<addForeignKeyConstraint baseColumnNames="warehouse_id"
			baseTableName="warehouse_group_mapping" constraintName="warehouse_group_mapping_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="warehouse" />
		<addForeignKeyConstraint baseColumnNames="warehouse_group_id"
			baseTableName="warehouse_group_mapping" constraintName="warehouse_group_mapping_fk_2"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="warehouse_group" />		
			
		<addForeignKeyConstraint baseColumnNames="warehouse_id"
			baseTableName="warehouse_items" constraintName="warehouse_items_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="warehouse" />	
			
		<addForeignKeyConstraint baseColumnNames="warehouse_id"
			baseTableName="warehouse_catalogs" constraintName="warehouse_catalogs_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="warehouse" />
			
		<addForeignKeyConstraint baseColumnNames="warehouse_id"
			baseTableName="warehouse_coupons" constraintName="warehouse_coupons_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="warehouse" />
		<addForeignKeyConstraint baseColumnNames="coupon_id"
			baseTableName="warehouse_coupons" constraintName="warehouse_coupons_fk_2"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="coupons" />		
			
		<addForeignKeyConstraint baseColumnNames="warehouse_id"
			baseTableName="warehouse_freight_rules" constraintName="warehouse_freight_rules_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="warehouse" />
			
		<addForeignKeyConstraint baseColumnNames="warehouse_id"
			baseTableName="warehouse_asset" constraintName="warehouse_asset_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="warehouse" />
		<addForeignKeyConstraint baseColumnNames="asset_id"
			baseTableName="warehouse_asset" constraintName="warehouse_asset_fk_2"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="asset" />	
			
		<addForeignKeyConstraint baseColumnNames="warehouse_id"
			baseTableName="warehouse_cluster_mapping" constraintName="warehouse_cluster_mapping_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="warehouse" />
		<addForeignKeyConstraint baseColumnNames="warehouse_cluster_id"
			baseTableName="warehouse_cluster_mapping" constraintName="warehouse_cluster_mapping_fk_2"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="warehouse_cluster" />			

		<addForeignKeyConstraint baseColumnNames="order_id"
			baseTableName="order_recurrence_schedule" constraintName="order_recurrence_schedule_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="orders" />
			
		<addForeignKeyConstraint baseColumnNames="customer_id"
			baseTableName="quote_request" constraintName="quote_request_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="customer" />
		<addForeignKeyConstraint baseColumnNames="order_id"
			baseTableName="quote_request" constraintName="quote_request_fk_2"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="orders" />	
			
		<addForeignKeyConstraint baseColumnNames="quote_id"
			baseTableName="quote_request_items" constraintName="quote_request_items_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="quote_request" />
			
		<addForeignKeyConstraint baseColumnNames="order_id"
			baseTableName="order_coupon_data" constraintName="order_coupon_data_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="orders" />	
			
		<addForeignKeyConstraint baseColumnNames="order_id"
			baseTableName="order_payment" constraintName="order_payment_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="orders" />		
				
		<addForeignKeyConstraint baseColumnNames="order_id"
			baseTableName="order_items" constraintName="order_items_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="orders" />	
			
		<addForeignKeyConstraint baseColumnNames="order_item_id"
			baseTableName="order_items_shipped" constraintName="order_items_shipped_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="order_items" />	
			
		<addForeignKeyConstraint baseColumnNames="order_pool_id"
			baseTableName="order_pool_items" constraintName="order_pool_items_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="order_pools" />	
			
		<addForeignKeyConstraint baseColumnNames="comm_feature_option_id"
			baseTableName="customer_comm_feature_option_values" constraintName="customer_comm_feature_option_values_fk_1"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="comm_feature_options" />
		<addForeignKeyConstraint baseColumnNames="customer_id"
			baseTableName="customer_comm_feature_option_values" constraintName="customer_comm_feature_option_values_fk_2"
			deferrable="false" initiallyDeferred="false" onDelete="SET NULL"
			onUpdate="SET NULL" referencedColumnNames="id" referencedTableName="customer" />
			
		<addForeignKeyConstraint baseColumnNames="customer_id"
		   	baseTableName="customer_portal" constraintName="customer_portal_customer_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer" />			 
		<addForeignKeyConstraint baseColumnNames="site_id"
			baseTableName="customer_portal" constraintName="customer_portal_site_id_fk_2"
			 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="websites" />
		
		<addForeignKeyConstraint baseColumnNames="customer_id"
			baseTableName="customer_catalog" constraintName="customer_catalog_customer_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer" />
		
		<addForeignKeyConstraint baseColumnNames="customer_id"
			baseTableName="customer_documents" constraintName="customer_documents_customer_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer" />
		<addForeignKeyConstraint baseColumnNames="customer_id"
		  	baseTableName="customer_message" constraintName="customer_message_customer_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer" />
		<addForeignKeyConstraint baseColumnNames="message_id"
			baseTableName="customer_message" constraintName="customer_message_message_id_fk_2"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="message" />
		
		<addForeignKeyConstraint baseColumnNames="message_id"
			baseTableName="message_tracker" constraintName="message_tracker_message_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="message" />
       
        <addForeignKeyConstraint baseColumnNames="secure_portal_id"
			baseTableName="secure_portal" constraintName="secure_portal_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer_secure_portal" />
	   
	    <addForeignKeyConstraint baseColumnNames="customer_id"
			baseTableName="customer_secure_portal" constraintName="customer_secure_portal_customer_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer" />
        
        <addForeignKeyConstraint baseColumnNames="customer_id"
			baseTableName="cimm_users" constraintName="cimm_users_customer_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer" />
	   
	    <addForeignKeyConstraint baseColumnNames="customer_id"
			baseTableName="customer_part_number" constraintName="customer_part_number_customer_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer" />
	    
	    <addForeignKeyConstraint baseColumnNames="customer_id"
			baseTableName="customer_websites" constraintName="customer_websites_customer_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer" />
		
		<addForeignKeyConstraint baseColumnNames="customer_category_id"
			baseTableName="customer_classification" constraintName="customer_classification_category_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer_category" />
		
		<addForeignKeyConstraint baseColumnNames="customer_category_id"
			baseTableName="customer_category_message" constraintName="customer_category_message_category_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer_category" />
		
		<addForeignKeyConstraint baseColumnNames="customer_site_id"
			baseTableName="product_group_list" constraintName="product_group_list_customer_site_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer_websites" />
		
		<addForeignKeyConstraint baseColumnNames="product_group_list_id"
			baseTableName="product_group_list_items" constraintName="product_group_list_items_group_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="product_group_list" />
			 <!-- Cart -->
		<addForeignKeyConstraint baseColumnNames="cart_id"
			baseTableName="cart_share" constraintName="cart_customer_cart_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="cart" />
		
		<addForeignKeyConstraint baseColumnNames="customer_category_id"
			baseTableName="cart" constraintName="cart_customer_category_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer_category" />
		<addForeignKeyConstraint baseColumnNames="customer_id"
			baseTableName="cart" constraintName="cart_customer_id_fk_2"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="customer" />
		
		<addForeignKeyConstraint baseColumnNames="cart_id"
			baseTableName="cart_items" constraintName="cart_items_cart_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="cart" />
		<addForeignKeyConstraint baseColumnNames="parent_cart_item_id"
			baseTableName="cart_items" constraintName="cart_items_parent_cart_item_id_fk_2"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="cart_items" />	
			 <!-- Events -->
		<addForeignKeyConstraint baseColumnNames="event_id"
			baseTableName="event_registration" constraintName="event_registration_event_id_fk_1"
			onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="events" />

	</changeSet>
</databaseChangeLog>
